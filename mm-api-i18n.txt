{"AllocModifyIndex":7783
"AllocatedResources":{"Shared":{"DiskMB":300
"Networks":null}
"Tasks":{"mm-api-i18n":{"Cpu":{"CpuShares":500}
"Devices":null
"Memory":{"MemoryMB":256}
"Networks":[{"CIDR":""
"Device":"eth0"
"DynamicPorts":[{"Label":"api"
"To":0
"Value":27559}
{"Label":"admin"
"To":0
"Value":31163}]
"IP":"172.21.39.7"
"MBits":1
"Mode":""
"ReservedPorts":null}]}
"filebeat":{"Cpu":{"CpuShares":100}
"Devices":null
"Memory":{"MemoryMB":300}
"Networks":null}
"redis":{"Cpu":{"CpuShares":100}
"Devices":null
"Memory":{"MemoryMB":300}
"Networks":[{"CIDR":""
"Device":"eth0"
"DynamicPorts":[{"Label":"redis"
"To":0
"Value":28993}]
"IP":"172.21.39.7"
"MBits":10
"Mode":""
"ReservedPorts":null}]}}}
"ClientDescription":"Tasks are running"
"ClientStatus":"running"
"CreateIndex":7783
"CreateTime":1583160314040201638
"DeploymentID":"ffe52f31-91b6-b75d-1a4f-4bb7bec640a2"
"DeploymentStatus":{"Canary":false
"Healthy":true
"ModifyIndex":7800
"Timestamp":"2020-03-02T14:48:06.084516887Z"}
"DesiredStatus":"run"
"EvalID":"4bb534bf-0d60-ed0c-1e66-9631fbdf7812"
"ID":"4383c53d-f68e-d8c2-95e6-c7ad4e252432"
"Job":{"Affinities":null
"AllAtOnce":false
"Constraints":[{"LTarget":"${meta.zone}"
"Operand":"distinct_property"
"RTarget":"1"}]
"CreateIndex":6999
"Datacenters":["azwe"]
"Dispatched":false
"ID":"mm-api-i18n"
"JobModifyIndex":7781
"Meta":null
"ModifyIndex":7781
"Name":"mm-api-i18n"
"Namespace":"default"
"ParameterizedJob":null
"ParentID":""
"Payload":null
"Periodic":null
"Priority":50
"Region":"global"
"Spreads":null
"Stable":false
"Status":"running"
"StatusDescription":""
"Stop":false
"SubmitTime":1583160314004107355
"TaskGroups":[{"Affinities":null
"Constraints":[{"LTarget":"${attr.os.signals}"
"Operand":"set_contains"
"RTarget":"SIGHUP"}]
"Count":2
"EphemeralDisk":{"Migrate":false
"SizeMB":300
"Sticky":false}
"Meta":null
"Migrate":{"HealthCheck":"checks"
"HealthyDeadline":300000000000
"MaxParallel":1
"MinHealthyTime":10000000000}
"Name":"mm-api-i18n"
"Networks":null
"ReschedulePolicy":{"Attempts":0
"Delay":30000000000
"DelayFunction":"exponential"
"Interval":0
"MaxDelay":3600000000000
"Unlimited":true}
"RestartPolicy":{"Attempts":3
"Delay":15000000000
"Interval":1800000000000
"Mode":"fail"}
"Services":null
"Spreads":null
"Tasks":[{"Affinities":null
"Artifacts":null
"Config":{"image":"elastic/filebeat:7.4.2"
"volumes":["local/filebeat.yml:/usr/share/filebeat/filebeat.yml"]}
"Constraints":null
"DispatchPayload":null
"Driver":"docker"
"Env":null
"KillSignal":""
"KillTimeout":5000000000
"Kind":""
"Leader":false
"LogConfig":{"MaxFileSizeMB":10
"MaxFiles":10}
"Meta":null
"Name":"filebeat"
"Resources":{"CPU":100
"Devices":null
"DiskMB":0
"IOPS":0
"MemoryMB":300
"Networks":null}
"Services":null
"ShutdownDelay":0
"Templates":[{"ChangeMode":"restart"
"ChangeSignal":""
"DestPath":"local/filebeat.yml"
"EmbeddedTmpl":"filebeat.inputs:\n- type: log\n  paths:\n    - /alloc/logs/*.log\n    - /alloc/logs/*.0\n    - /alloc/logs/**/*.log\n  fields_under_root: true\n  fields:\n    application: mm-api-i18n\n    environment: stage\noutput.kafka:\n  enabled: true\n  # initial brokers for reading cluster metadata\n  hosts: [\"172.21.35.206:9092\"]\n  topic: \"logs\"\n  required_acks: 1\t\n"
"Envvars":false
"LeftDelim":"{{"
"Perms":"0644"
"RightDelim":"}}"
"SourcePath":""
"Splay":5000000000
"VaultGrace":15000000000}]
"User":""
"Vault":null
"VolumeMounts":null}
{"Affinities":null
"Artifacts":null
"Config":{"port_map":[{"redis":6379.0}]
"image":"redis:latest"}
"Constraints":null
"DispatchPayload":null
"Driver":"docker"
"Env":null
"KillSignal":""
"KillTimeout":5000000000
"Kind":""
"Leader":false
"LogConfig":{"MaxFileSizeMB":10
"MaxFiles":10}
"Meta":null
"Name":"redis"
"Resources":{"CPU":100
"Devices":null
"DiskMB":0
"IOPS":0
"MemoryMB":300
"Networks":[{"CIDR":""
"Device":""
"DynamicPorts":[{"Label":"redis"
"To":0
"Value":0}]
"IP":""
"MBits":10
"Mode":""
"ReservedPorts":null}]}
"Services":[{"AddressMode":"auto"
"CanaryTags":null
"Checks":[{"AddressMode":""
"Args":null
"CheckRestart":null
"Command":""
"GRPCService":""
"GRPCUseTLS":false
"Header":null
"InitialStatus":""
"Interval":20000000000
"Method":""
"Name":"alive"
"Path":""
"PortLabel":""
"Protocol":""
"TLSSkipVerify":false
"TaskName":""
"Timeout":3000000000
"Type":"tcp"}]
"Connect":null
"Meta":null
"Name":"${NOMAD_GROUP_NAME}-redis"
"PortLabel":"redis"
"Tags":["redis"
"db"]}]
"ShutdownDelay":0
"Templates":null
"User":""
"Vault":null
"VolumeMounts":null}
{"Affinities":null
"Artifacts":[{"GetterMode":"file"
"GetterOptions":null
"GetterSource":"http://int.config-service.stg.arvm.de/mm-api-i18n-stg.yml"
"RelativeDest":"local/env.yaml.tmpl"}]
"Config":{"auth":[{"username":"mondia"
"password":"rOIo1ss1AIuyjdnx+ZYStPuQ1mzsJkA5"}]
"image":"mondia.azurecr.io/mondia/mm-api-i18n:184746154c6"
"port_map":[{"admin":8002.0
"api":8001.0}]
"volumes":["local/env.yaml:/etc/env.yaml"]}
"Constraints":null
"DispatchPayload":null
"Driver":"docker"
"Env":{"DEBUG":"*"
"LOG_PATH":"/alloc/logs"
"NODE_SYSCONFIG":"/etc/env.yaml"}
"KillSignal":""
"KillTimeout":5000000000
"Kind":""
"Leader":true
"LogConfig":{"MaxFileSizeMB":10
"MaxFiles":10}
"Meta":null
"Name":"mm-api-i18n"
"Resources":{"CPU":500
"Devices":null
"DiskMB":0
"IOPS":0
"MemoryMB":256
"Networks":[{"CIDR":""
"Device":""
"DynamicPorts":[{"Label":"api"
"To":0
"Value":0}
{"Label":"admin"
"To":0
"Value":0}]
"IP":""
"MBits":1
"Mode":""
"ReservedPorts":null}]}
"Services":[{"AddressMode":"auto"
"CanaryTags":null
"Checks":[{"AddressMode":""
"Args":null
"CheckRestart":null
"Command":""
"GRPCService":""
"GRPCUseTLS":false
"Header":null
"InitialStatus":""
"Interval":15000000000
"Method":""
"Name":"infoCheckFast"
"Path":"/infoCheck"
"PortLabel":"api"
"Protocol":""
"TLSSkipVerify":false
"TaskName":""
"Timeout":2000000000
"Type":"http"}
{"AddressMode":""
"Args":null
"CheckRestart":null
"Command":""
"GRPCService":""
"GRPCUseTLS":false
"Header":null
"InitialStatus":""
"Interval":150000000000
"Method":""
"Name":"infoCheckFull"
"Path":"/infoCheck?doChecks=true"
"PortLabel":"api"
"Protocol":""
"TLSSkipVerify":false
"TaskName":""
"Timeout":2000000000
"Type":"http"}]
"Connect":null
"Meta":null
"Name":"mm-api-i18n"
"PortLabel":"api"
"Tags":["autodeploy"
"nodejs"
"withredis"
"api"
"traefik.enable=true"
"traefik.expose=int"]}
{"AddressMode":"auto"
"CanaryTags":null
"Checks":[{"AddressMode":""
"Args":null
"CheckRestart":null
"Command":""
"GRPCService":""
"GRPCUseTLS":false
"Header":null
"InitialStatus":""
"Interval":15000000000
"Method":""
"Name":"infoCheckFast"
"Path":"/infoCheck"
"PortLabel":"admin"
"Protocol":""
"TLSSkipVerify":false
"TaskName":""
"Timeout":2000000000
"Type":"http"}
{"AddressMode":""
"Args":null
"CheckRestart":null
"Command":""
"GRPCService":""
"GRPCUseTLS":false
"Header":null
"InitialStatus":""
"Interval":150000000000
"Method":""
"Name":"infoCheckFull"
"Path":"/infoCheck?doChecks=true"
"PortLabel":"admin"
"Protocol":""
"TLSSkipVerify":false
"TaskName":""
"Timeout":2000000000
"Type":"http"}]
"Connect":null
"Meta":null
"Name":"mm-api-i18n-admin"
"PortLabel":"admin"
"Tags":["autodeploy"
"nodejs"
"withredis"
"admin"
"traefik.enable=true"
"traefik.expose=int"]}]
"ShutdownDelay":0
"Templates":[{"ChangeMode":"signal"
"ChangeSignal":"SIGHUP"
"DestPath":"local/env.yaml"
"EmbeddedTmpl":""
"Envvars":false
"LeftDelim":"{{"
"Perms":"0644"
"RightDelim":"}}"
"SourcePath":"local/env.yaml.tmpl"
"Splay":5000000000
"VaultGrace":15000000000}]
"User":""
"Vault":null
"VolumeMounts":null}]
"Update":{"AutoPromote":false
"AutoRevert":true
"Canary":0
"HealthCheck":"checks"
"HealthyDeadline":300000000000
"MaxParallel":1
"MinHealthyTime":10000000000
"ProgressDeadline":900000000000
"Stagger":30000000000}
"Volumes":null}]
"Type":"service"
"Update":{"AutoPromote":false
"AutoRevert":false
"Canary":0
"HealthCheck":""
"HealthyDeadline":0
"MaxParallel":1
"MinHealthyTime":0
"ProgressDeadline":0
"Stagger":30000000000}
"VaultToken":""
"Version":4}
"JobID":"mm-api-i18n"
"Metrics":{"AllocationTime":519312
"ClassExhausted":null
"ClassFiltered":null
"CoalescedFailures":0
"ConstraintFiltered":{"missing property \"${meta.zone}\"":1
"distinct_property: ${meta.zone}=2 used by 1 allocs":1}
"DimensionExhausted":null
"NodesAvailable":{"azwe":6}
"NodesEvaluated":6
"NodesExhausted":0
"NodesFiltered":2
"QuotaExhausted":null
"ScoreMetaData":[{"NodeID":"84aaeedd-835c-7835-0f10-01f102c9774c"
"NormScore":-0.11116457491299214
"Scores":{"binpack":0.7776708501740157
"job-anti-affinity":0.0
"node-reschedule-penalty":-1.0
"node-affinity":0.0}}
{"NodeID":"1e75ab2c-5cd1-4464-75bf-f0d201804d1d"
"NormScore":-0.21424529455674635
"Scores":{"node-affinity":0.0
"binpack":0.5715094108865073
"job-anti-affinity":0.0
"node-reschedule-penalty":-1.0}}
{"NodeID":"1e4d22c8-08a1-eff3-20bf-d03922d94919"
"NormScore":-0.4225777802908457
"Scores":{"binpack":0.1548444394183086
"job-anti-affinity":0.0
"node-reschedule-penalty":-1.0
"node-affinity":0.0}}
{"NodeID":"2f54346d-94f0-c589-9b2d-eab949bcc95a"
"NormScore":-0.4225777802908457
"Scores":{"job-anti-affinity":0.0
"node-reschedule-penalty":-1.0
"node-affinity":0.0
"binpack":0.1548444394183086}}]
"Scores":null}
"ModifyIndex":7800
"ModifyTime":1583160486218182281
"Name":"mm-api-i18n.mm-api-i18n[0]"
"Namespace":"default"
"NodeID":"84aaeedd-835c-7835-0f10-01f102c9774c"
"NodeName":"nomadclient3"
"PreviousAllocation":"3090522d-c7de-6219-4f31-e0eb35214656"
"Resources":{"CPU":700
"Devices":null
"DiskMB":300
"IOPS":0
"MemoryMB":856
"Networks":[{"CIDR":""
"Device":"eth0"
"DynamicPorts":[{"Label":"redis"
"To":0
"Value":28993}
{"Label":"api"
"To":0
"Value":27559}
{"Label":"admin"
"To":0
"Value":31163}]
"IP":"172.21.39.7"
"MBits":11
"Mode":""
"ReservedPorts":null}]}
"SharedResources":{"CPU":0
"Devices":null
"DiskMB":300
"IOPS":0
"MemoryMB":0
"Networks":null}
"TaskGroup":"mm-api-i18n"
"TaskResources":{"filebeat":{"CPU":100
"Devices":null
"DiskMB":0
"IOPS":0
"MemoryMB":300
"Networks":null}
"redis":{"CPU":100
"Devices":null
"DiskMB":0
"IOPS":0
"MemoryMB":300
"Networks":[{"CIDR":""
"Device":"eth0"
"DynamicPorts":[{"Label":"redis"
"To":0
"Value":28993}]
"IP":"172.21.39.7"
"MBits":10
"Mode":""
"ReservedPorts":null}]}
"mm-api-i18n":{"CPU":500
"Devices":null
"DiskMB":0
"IOPS":0
"MemoryMB":256
"Networks":[{"CIDR":""
"Device":"eth0"
"DynamicPorts":[{"Label":"api"
"To":0
"Value":27559}
{"Label":"admin"
"To":0
"Value":31163}]
"IP":"172.21.39.7"
"MBits":1
"Mode":""
"ReservedPorts":null}]}}
"TaskStates":{"redis":{"Events":[{"Details":{}
"DiskLimit":0
"DisplayMessage":"Task received by client"
"DownloadError":""
"DriverError":""
"DriverMessage":""
"ExitCode":0
"FailedSibling":""
"FailsTask":false
"GenericSource":""
"KillError":""
"KillReason":""
"KillTimeout":0
"Message":""
"RestartReason":""
"SetupError":""
"Signal":0
"StartDelay":0
"TaskSignal":""
"TaskSignalReason":""
"Time":1583160314268753000
"Type":"Received"
"ValidationError":""
"VaultError":""}
{"Details":{"message":"Building Task Directory"}
"DiskLimit":0
"DisplayMessage":"Building Task Directory"
"DownloadError":""
"DriverError":""
"DriverMessage":""
"ExitCode":0
"FailedSibling":""
"FailsTask":false
"GenericSource":""
"KillError":""
"KillReason":""
"KillTimeout":0
"Message":"Building Task Directory"
"RestartReason":""
"SetupError":""
"Signal":0
"StartDelay":0
"TaskSignal":""
"TaskSignalReason":""
"Time":1583160321696261034
"Type":"Task Setup"
"ValidationError":""
"VaultError":""}
{"Details":{"image":"redis:latest"}
"DiskLimit":0
"DisplayMessage":"Downloading image"
"DownloadError":""
"DriverError":""
"DriverMessage":"Downloading image"
"ExitCode":0
"FailedSibling":""
"FailsTask":false
"GenericSource":""
"KillError":""
"KillReason":""
"KillTimeout":0
"Message":""
"RestartReason":""
"SetupError":""
"Signal":0
"StartDelay":0
"TaskSignal":""
"TaskSignalReason":""
"Time":1583160322235198710
"Type":"Driver"
"ValidationError":""
"VaultError":""}
{"Details":{}
"DiskLimit":0
"DisplayMessage":"Task started by client"
"DownloadError":""
"DriverError":""
"DriverMessage":""
"ExitCode":0
"FailedSibling":""
"FailsTask":false
"GenericSource":""
"KillError":""
"KillReason":""
"KillTimeout":0
"Message":""
"RestartReason":""
"SetupError":""
"Signal":0
"StartDelay":0
"TaskSignal":""
"TaskSignalReason":""
"Time":1583160325339500355
"Type":"Started"
"ValidationError":""
"VaultError":""}]
"Failed":false
"FinishedAt":null
"LastRestart":null
"Restarts":0
"StartedAt":"2020-03-02T14:45:25.339507355Z"
"State":"running"}
"mm-api-i18n":{"Events":[{"Details":{}
"DiskLimit":0
"DisplayMessage":"Task received by client"
"DownloadError":""
"DriverError":""
"DriverMessage":""
"ExitCode":0
"FailedSibling":""
"FailsTask":false
"GenericSource":""
"KillError":""
"KillReason":""
"KillTimeout":0
"Message":""
"RestartReason":""
"SetupError":""
"Signal":0
"StartDelay":0
"TaskSignal":""
"TaskSignalReason":""
"Time":1583160314269479705
"Type":"Received"
"ValidationError":""
"VaultError":""}
{"Details":{"message":"Building Task Directory"}
"DiskLimit":0
"DisplayMessage":"Building Task Directory"
"DownloadError":""
"DriverError":""
"DriverMessage":""
"ExitCode":0
"FailedSibling":""
"FailsTask":false
"GenericSource":""
"KillError":""
"KillReason":""
"KillTimeout":0
"Message":"Building Task Directory"
"RestartReason":""
"SetupError":""
"Signal":0
"StartDelay":0
"TaskSignal":""
"TaskSignalReason":""
"Time":1583160321597792344
"Type":"Task Setup"
"ValidationError":""
"VaultError":""}
{"Details":{}
"DiskLimit":0
"DisplayMessage":"Client is downloading artifacts"
"DownloadError":""
"DriverError":""
"DriverMessage":""
"ExitCode":0
"FailedSibling":""
"FailsTask":false
"GenericSource":""
"KillError":""
"KillReason":""
"KillTimeout":0
"Message":""
"RestartReason":""
"SetupError":""
"Signal":0
"StartDelay":0
"TaskSignal":""
"TaskSignalReason":""
"Time":1583160321905579002
"Type":"Downloading Artifacts"
"ValidationError":""
"VaultError":""}
{"Details":{}
"DiskLimit":0
"DisplayMessage":"Task started by client"
"DownloadError":""
"DriverError":""
"DriverMessage":""
"ExitCode":0
"FailedSibling":""
"FailsTask":false
"GenericSource":""
"KillError":""
"KillReason":""
"KillTimeout":0
"Message":""
"RestartReason":""
"SetupError":""
"Signal":0
"StartDelay":0
"TaskSignal":""
"TaskSignalReason":""
"Time":1583160325601935888
"Type":"Started"
"ValidationError":""
"VaultError":""}]
"Failed":false
"FinishedAt":null
"LastRestart":null
"Restarts":0
"StartedAt":"2020-03-02T14:45:25.601942289Z"
"State":"running"}
"filebeat":{"Events":[{"Details":{}
"DiskLimit":0
"DisplayMessage":"Task received by client"
"DownloadError":""
"DriverError":""
"DriverMessage":""
"ExitCode":0
"FailedSibling":""
"FailsTask":false
"GenericSource":""
"KillError":""
"KillReason":""
"KillTimeout":0
"Message":""
"RestartReason":""
"SetupError":""
"Signal":0
"StartDelay":0
"TaskSignal":""
"TaskSignalReason":""
"Time":1583160314268134897
"Type":"Received"
"ValidationError":""
"VaultError":""}
{"Details":{"message":"Building Task Directory"}
"DiskLimit":0
"DisplayMessage":"Building Task Directory"
"DownloadError":""
"DriverError":""
"DriverMessage":""
"ExitCode":0
"FailedSibling":""
"FailsTask":false
"GenericSource":""
"KillError":""
"KillReason":""
"KillTimeout":0
"Message":"Building Task Directory"
"RestartReason":""
"SetupError":""
"Signal":0
"StartDelay":0
"TaskSignal":""
"TaskSignalReason":""
"Time":1583160321680841926
"Type":"Task Setup"
"ValidationError":""
"VaultError":""}
{"Details":{}
"DiskLimit":0
"DisplayMessage":"Task started by client"
"DownloadError":""
"DriverError":""
"DriverMessage":""
"ExitCode":0
"FailedSibling":""
"FailsTask":false
"GenericSource":""
"KillError":""
"KillReason":""
"KillTimeout":0
"Message":""
"RestartReason":""
"SetupError":""
"Signal":0
"StartDelay":0
"TaskSignal":""
"TaskSignalReason":""
"Time":1583160323398303936
"Type":"Started"
"ValidationError":""
"VaultError":""}]
"Failed":false
"FinishedAt":null
"LastRestart":null
"Restarts":0
"StartedAt":"2020-03-02T14:45:23.398310236Z"
"State":"running"}}}