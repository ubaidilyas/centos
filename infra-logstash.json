{"AllocModifyIndex":26250,"AllocatedResources":{"Shared":{"DiskMB":300,"Networks":null},"Tasks":{"logstash":{"Cpu":{"CpuShares":500},"Devices":null,"Memory":{"MemoryMB":1024},"Networks":[{"CIDR":"","Device":"eth0","DynamicPorts":[{"Label":"api","To":0,"Value":30538}],"IP":"172.21.39.7","MBits":200,"Mode":"","ReservedPorts":null}]}}},"ClientDescription":"Tasks are running","ClientStatus":"running","CreateIndex":26250,"CreateTime":1584104977897127756,"DeploymentID":"55964b10-d994-d3d9-f1a9-3715961c299d","DeploymentStatus":{"Canary":false,"Healthy":true,"ModifyIndex":26255,"Timestamp":"2020-03-13T13:09:50.309529334Z"},"DesiredStatus":"run","EvalID":"a3bcf739-7043-5d21-ed33-9606d866755b","ID":"cd91bc9f-a305-794c-e51f-1020c716422d","Job":{"Affinities":null,"AllAtOnce":false,"Constraints":null,"CreateIndex":265,"Datacenters":["azwe"],"Dispatched":false,"ID":"infra-logstash","JobModifyIndex":26248,"Meta":null,"ModifyIndex":26249,"Name":"infra-logstash","Namespace":"default","ParameterizedJob":null,"ParentID":"","Payload":null,"Periodic":null,"Priority":50,"Region":"global","Spreads":null,"Stable":false,"Status":"pending","StatusDescription":"","Stop":false,"SubmitTime":1584104977506765505,"TaskGroups":[{"Affinities":null,"Constraints":[{"LTarget":"${meta.dc}","Operand":"=","RTarget":"azwe"}],"Count":1,"EphemeralDisk":{"Migrate":false,"SizeMB":300,"Sticky":false},"Meta":null,"Migrate":{"HealthCheck":"checks","HealthyDeadline":300000000000,"MaxParallel":1,"MinHealthyTime":10000000000},"Name":"logstash","Networks":null,"ReschedulePolicy":{"Attempts":0,"Delay":30000000000,"DelayFunction":"exponential","Interval":0,"MaxDelay":3600000000000,"Unlimited":true},"RestartPolicy":{"Attempts":2,"Delay":15000000000,"Interval":1800000000000,"Mode":"fail"},"Services":null,"Spreads":null,"Tasks":[{"Affinities":null,"Artifacts":null,"Config":{"image":"logstash:7.6.0","port_map":[{"api":9600.0}],"volumes":["local/logstash.yml:/usr/share/logstash/config/logstash.yml","local/pipeline.conf:/usr/share/logstash/pipeline/logstash.conf"]},"Constraints":null,"DispatchPayload":null,"Driver":"docker","Env":{"KSQL_LISTENERS":"http://0.0.0.0:8088/","KSQL_BOOTSTRAP_SERVERS":"172.21.35.205:9092","KSQL_KSQL_SERVICE_ID":"logstash1"},"KillSignal":"","KillTimeout":5000000000,"Kind":"","Leader":false,"LogConfig":{"MaxFileSizeMB":10,"MaxFiles":10},"Meta":null,"Name":"logstash","Resources":{"CPU":500,"Devices":null,"DiskMB":0,"IOPS":0,"MemoryMB":1024,"Networks":[{"CIDR":"","Device":"","DynamicPorts":[{"Label":"api","To":0,"Value":0}],"IP":"","MBits":200,"Mode":"","ReservedPorts":null}]},"Services":[{"AddressMode":"auto","CanaryTags":null,"Checks":null,"Connect":null,"Meta":null,"Name":"logstash","PortLabel":"api","Tags":["infra","logging"]}],"ShutdownDelay":0,"Templates":[{"ChangeMode":"restart","ChangeSignal":"","DestPath":"local/logstash.yml","EmbeddedTmpl":"http.host: \"0.0.0.0\"\nxpack.monitoring.enabled: true\nxpack.monitoring.elasticsearch.hosts: [ \"http://172.21.34.98:9200\" ]\nxpack.monitoring.elasticsearch.username: \"elastic\" \nxpack.monitoring.elasticsearch.password: \"5svgkwms6djskhqmrkh7jp9b\"\n","Envvars":false,"LeftDelim":"{{","Perms":"0644","RightDelim":"}}","SourcePath":"","Splay":5000000000,"VaultGrace":15000000000},{"ChangeMode":"restart","ChangeSignal":"","DestPath":"local/pipeline.conf","EmbeddedTmpl":"input {\n  kafka {\n    bootstrap_servers => \"172.21.35.206:9092\"\n    topics => [\"logs\"]\n    id => \"logstash_kafka\"\n    codec => \"json\"\n  }\n}\nfilter {\n  if \"MARK_KIBANA\" in [message] {\n    drop {}\n  }\n}\noutput {\n#  stdout {\n#    codec => rubydebug\n#  }\n  elasticsearch {\n    ilm_enabled => true\n    http_compression => false\n    hosts => [\"http://172.21.34.98:9200\"]\n    user => \"elastic\"\n    password => \"5svgkwms6djskhqmrkh7jp9b\"\n  }\n}\n\n","Envvars":false,"LeftDelim":"{{","Perms":"0644","RightDelim":"}}","SourcePath":"","Splay":5000000000,"VaultGrace":15000000000}],"User":"","Vault":null,"VolumeMounts":null}],"Update":{"AutoPromote":false,"AutoRevert":false,"Canary":0,"HealthCheck":"checks","HealthyDeadline":180000000000,"MaxParallel":1,"MinHealthyTime":10000000000,"ProgressDeadline":600000000000,"Stagger":30000000000},"Volumes":null}],"Type":"service","Update":{"AutoPromote":false,"AutoRevert":false,"Canary":0,"HealthCheck":"","HealthyDeadline":0,"MaxParallel":1,"MinHealthyTime":0,"ProgressDeadline":0,"Stagger":30000000000},"VaultToken":"","Version":6},"JobID":"infra-logstash","Metrics":{"AllocationTime":315619,"ClassExhausted":null,"ClassFiltered":null,"CoalescedFailures":0,"ConstraintFiltered":{"${meta.dc} = azwe":1},"DimensionExhausted":null,"NodesAvailable":{"azwe":6},"NodesEvaluated":4,"NodesExhausted":0,"NodesFiltered":1,"QuotaExhausted":null,"ScoreMetaData":[{"NodeID":"84aaeedd-835c-7835-0f10-01f102c9774c","NormScore":0.8785357328915673,"Scores":{"node-affinity":0.0,"binpack":0.8785357328915673,"job-anti-affinity":0.0,"node-reschedule-penalty":0.0}},{"NodeID":"e3caca7a-e93a-8d2f-f476-40254148622c","NormScore":0.8659260245685325,"Scores":{"node-affinity":0.0,"binpack":0.8659260245685325,"job-anti-affinity":0.0,"node-reschedule-penalty":0.0}},{"NodeID":"1e75ab2c-5cd1-4464-75bf-f0d201804d1d","NormScore":0.7506069070915823,"Scores":{"binpack":0.7506069070915823,"job-anti-affinity":0.0,"node-reschedule-penalty":0.0,"node-affinity":0.0}}],"Scores":null},"ModifyIndex":26255,"ModifyTime":1584104990417980332,"Name":"infra-logstash.logstash[0]","Namespace":"default","NodeID":"84aaeedd-835c-7835-0f10-01f102c9774c","NodeName":"nomadclient3","Resources":{"CPU":500,"Devices":null,"DiskMB":300,"IOPS":0,"MemoryMB":1024,"Networks":[{"CIDR":"","Device":"eth0","DynamicPorts":[{"Label":"api","To":0,"Value":30538}],"IP":"172.21.39.7","MBits":200,"Mode":"","ReservedPorts":null}]},"SharedResources":{"CPU":0,"Devices":null,"DiskMB":300,"IOPS":0,"MemoryMB":0,"Networks":null},"TaskGroup":"logstash","TaskResources":{"logstash":{"CPU":500,"Devices":null,"DiskMB":0,"IOPS":0,"MemoryMB":1024,"Networks":[{"CIDR":"","Device":"eth0","DynamicPorts":[{"Label":"api","To":0,"Value":30538}],"IP":"172.21.39.7","MBits":200,"Mode":"","ReservedPorts":null}]}},"TaskStates":{"logstash":{"Events":[{"Details":{},"DiskLimit":0,"DisplayMessage":"Task received by client","DownloadError":"","DriverError":"","DriverMessage":"","ExitCode":0,"FailedSibling":"","FailsTask":false,"GenericSource":"","KillError":"","KillReason":"","KillTimeout":0,"Message":"","RestartReason":"","SetupError":"","Signal":0,"StartDelay":0,"TaskSignal":"","TaskSignalReason":"","Time":1584104978719491202,"Type":"Received","ValidationError":"","VaultError":""},{"Details":{"message":"Building Task Directory"},"DiskLimit":0,"DisplayMessage":"Building Task Directory","DownloadError":"","DriverError":"","DriverMessage":"","ExitCode":0,"FailedSibling":"","FailsTask":false,"GenericSource":"","KillError":"","KillReason":"","KillTimeout":0,"Message":"Building Task Directory","RestartReason":"","SetupError":"","Signal":0,"StartDelay":0,"TaskSignal":"","TaskSignalReason":"","Time":1584104978749171584,"Type":"Task Setup","ValidationError":"","VaultError":""},{"Details":{},"DiskLimit":0,"DisplayMessage":"Task started by client","DownloadError":"","DriverError":"","DriverMessage":"","ExitCode":0,"FailedSibling":"","FailsTask":false,"GenericSource":"","KillError":"","KillReason":"","KillTimeout":0,"Message":"","RestartReason":"","SetupError":"","Signal":0,"StartDelay":0,"TaskSignal":"","TaskSignalReason":"","Time":1584104980285181100,"Type":"Started","ValidationError":"","VaultError":""}],"Failed":false,"FinishedAt":null,"LastRestart":null,"Restarts":0,"StartedAt":"2020-03-13T13:09:40.2851865Z","State":"running"}}}